<!DOCTYPE html> 
<html> 
    <head>    
        <meta charset="UTF-8">    
        <meta name="author" content="FatalJoy">
        <title>Geralt of Rivia</title> 
    </head> 
    <body>    
        <header>        
            <h1> Geralt of Rivia </h1>  
            <p><strong>Why men throw their lives away attacking an armed witcher... I'll never know. Something wrong with my face?</strong></p>
            <p><cite>-Geralt</cite></p> 
        </header>
        <main> 
            <hr>
            <h2><em>Who is Geralt of Rivia</em></h2>                         
            <div>                
                <img src="http://www.gamerbolt.com/wp-content/uploads/2017/01/Geralt.jpg" width="50%" height="50%" alt="Typical Geralt">                
                <p><strong>Really?</strong>hhh</p>            
            </div> 
            <div>
                <hr> 
                <h2>Geralt of Rivia, also known as:</h2>               
                <ul>
                    <li>the White Wolf</li>  
                    <li>Butcher of Blaviken</li>
                </ul>          
            </div>           

            <article>               
                <p><a href="https://witcher.fandom.com/wiki/Geralt_of_Rivia">Geralt of Rivia</a> was a witcher, a monster hunter for hire, who possessed superhuman abilities<br> 
                    and was a master swordsman. During the Trial of the Grasses, Geralt exhibited unusual  <br>
                    tolerance for the mutagens that grant witchers their abilities.  Accordingly, Geralt was <br>
                    subjected to further experimental mutagens which rendered his hair white and may have <br>given him greater speed, strength, and stamina than his fellow witchers.
                </p>
                <p><b>...if I'm to choose between one evil and another, then I prefer not to choose at all.</b></p> 
                <p><cite>-Geralt</cite></p>                 
            </article>
            <hr>
            <h2 title="Song of the White Wolf"><a href="https://www.musixmatch.com/lyrics/Sharm/The-Wolven-Storm-Priscilla-s-Song">The Wolven Storm</a></h2>
            <pre>            
                These scars long have yearned for your tender caress
                To bind our fortunes, damn what the stars own
                Rend my heart open, then your love profess
                A winding, weaving fate to which we both atone
                    
                You flee my dream come the morning
                Your scent - berries tart, lilac sweet
                To dream of raven locks entwisted, stormy
            </pre>

            <section>
                    <hr>                
                <h2>Relevant People</h2>                
                <p> 
                    <dl>
                        <dt><a href="https://witcher.fandom.com/wiki/Yennefer">Yennefer</a></dt>
                        <dd>Yennefer, born on Belleteyn in 1173, was a sorceress who lived in Vengerberg, the capital <br>city of Aedirn. She was Geralt of Rivia's true love and a mother figure to Ciri</dd>
                        <dt><a href="https://witcher.fandom.com/wiki/Ciri">Ciri</a></dt>
                        <dd>Ciri was the sole princess of Cintra, and also Geralt's adopted daughter by the Law of Surprise.</dd>
                    </dl>
                </p>     
            </section> 
        </main>
    <footer>         
        <hr>        
        <p>Created by FatalJoy.</p>    
    </footer> 
    </body> 
</html>



<!DOCTYPE html>
<html>

<head>

<meta charset="UTF-8">
<title>Joy Login Page</title>
<style>
  	body,html{
  		margin:0;
  		padding:0;
  		width:100%;
  		height:100%;
  		display:table;
  		top: 0;
  		left: 0;
 			right: 0;
  		bottom: 0;
  	}
  	body{
  		background-image: url("png/bg.png");
  		background-size: 1280px 768px;;
  	} 
  	#content{
  		display:table-cell;
  		vertical-align:middle;
  		
  	}
  	.login-card{
  		padding:40px;
  		width:274px;
  		background-color:rgb(255, 255, 255);
  		margin:0 auto 0;
  		box-shadow:0 2px 2px #000000;
  	}

  	.login-card input[type=submit]{
  		width:35%;
  		height:44px;
  		display:block;
  		margin-bottom:0;
  		position:relative;
  		border-radius:5px;
  		
  	}
  	.login-card input[type=text],input[type=password]{
  		height:44px;
  		font-size:16px;
  		width:100%;
  		margin-bottom:10px;
  		border-top:1px solid rgb(219, 219, 219);
  		padding:0 8px;
  		border-radius:5px;
  		box-align:center;
  	
  	}

  	.login-submit{
  		color:rgb(134, 134, 134);
  		background-color:#f7f7f7;
  		width:40px;
  		font-size:14px;
  		font-weight:700;
  		height:36px;
  		padding:2 0px;
  	}
  	#log1{
  		color:rgb(134, 134, 134);
  		height:30px;
  		width:314.5px;
  		line-height:30px;
  		overflow:hidden;
  		left:463px;
  		padding:20px;
  		margin-left:0;
  		background-color:#eaeaea;
  		position:relative;
  		box-shadow:0 0 2px #000000;
  		text-indent:2%;
  		top: 50%;
  		left: 50%;
  		margin-left: -177px;
  		margin-top: -15px;
  	
  		
  	}
    #reset{
  		color:#ffffff;
  		text-align:center;
  		position:absolute;
  		top: 500px;
  		left: 550px;

  	}
</style>
</head>

<body>
  	
<div id="content">
  <div id="log1">Login to your app</div>
  <div class="login-card">
    <form name="login_form" method="post" action="non">
  	<input type="text" name="joy_user" placeholder="Username" id="joy_user">
  	<input type="password" name="joy_pass" placeholder="Password" id="joy_pass">
  	<input type="submit" name="accept" class="login-submit" value="Login" id="login">
    </form>
  </div>
  <div id="reset">or reset your password</div>
</div>

</body>
</html>


<!DOCTYPE html> 
<html> 
    <head>    
        <meta charset="UTF-8">    
        <meta name="author" content="FatalJoy">
        <title>Geralt of Rivia</title> 
        <link rel="stylesheet" href="css/geralt_1.css">
    </head> 
    
    <body> 
    <div class="container">
        <div id="ball" ></div>
        <header>
        <div class="item1", id="rect">  
            <h1> Geralt of Rivia </h1> 
        </div> 
        </header>

        <div id="nav">
            <ul>
                <li>Who is Geralt of Rivia</li>
                <br>
                <li>Geralt of Rivia, also known as:</li>
                <br>
                <li>The Wolven Storm</li>
                <br>
                <li>Relevant People</li>
            </ul>
        </div>

        <div class="item3">
            <div class="cite">
            <p><strong>Why men throw their lives away attacking an armed witcher... I'll never know. Something wrong with my face?</strong></p>
            <p><cite>-Geralt</cite></p> 
            </div>
        <main> 
            <hr>                    
            <div class="header">
                <h2>Who is Geralt of Rivia</h2>
            </div>                 
            <img src="http://www.gamerbolt.com/wp-content/uploads/2017/01/Geralt.jpg" width="100%" height="50%" alt="Typical Geralt">                
            <p><strong>Really?</strong>hhh</p>            
            


            <hr> 
            <div class="header">
                <h2>Geralt of Rivia, also known as:</h2>  
                <ul>
                    <li>the White Wolf</li>  
                    <li>Butcher of Blaviken</li> 
                </ul>             
        
            </div>           
            



            <article> 
                <div class="main">              
                    <p><a href="https://witcher.fandom.com/wiki/Geralt_of_Rivia">Geralt of Rivia</a> 
                    was a witcher, a monster hunter for hire, who possessed superhuman abilities
                    and was a master swordsman. During the Trial of the Grasses, Geralt exhibited unusual
                    tolerance for the mutagens that grant witchers their abilities.  Accordingly, Geralt was
                    subjected to further experimental mutagens which rendered his hair white and may have 
                    given him greater speed, strength, and stamina than his fellow witchers.
                    </p>
                </div>

                <div class="cite">
                    <p><b>...if I'm to choose between one evil and another, then I prefer not to choose at all.</b></p> 
                    <p><cite>-Geralt</cite></p>  
                </div>   
            </article>


                 <div class="main">
                    <hr>
                    <h2 title="Song of the White Wolf"><a href="https://www.musixmatch.com/lyrics/Sharm/The-Wolven-Storm-Priscilla-s-Song">The Wolven Storm</a></h2>
                    <p>            
                        These scars long have yearned for your tender caress<br>
                        To bind our fortunes, damn what the stars own<br>
                        Rend my heart open, then your love profess<br>
                        A winding, weaving fate to which we both atone<br>
                    </p>
                        You flee my dream come the morning<br>
                        Your scent - berries tart, lilac sweet<br>
                        To dream of raven locks entwisted, stormy<br>
                    </p>
                </div>

            <section>
                <div class="main">
                    <hr>                
                    <h2>Relevant People</h2>                
                    <p> 
                    <dl>
                        <dt><a href="https://witcher.fandom.com/wiki/Yennefer">Yennefer</a></dt>
                        <dd>Yennefer, born on Belleteyn in 1173, was a sorceress who lived in Vengerberg, the capital city of Aedirn. She was Geralt of Rivia's true love and a mother figure to Ciri</dd>
                        <dt><a href="https://witcher.fandom.com/wiki/Ciri">Ciri</a></dt>
                        <dd>Ciri was the sole princess of Cintra, and also Geralt's adopted daughter by the Law of Surprise.</dd>
                    </dl>
                    </p>
                </div>     
            </section> 
        </main>
        </div>
    <div class="item4">
    <footer>         
        <hr>        
        <p>Created by FatalJoy.</p>    
    </footer> 
    </div>
</div>
    </body> 
</html>

.header, .cite, .main{    
  margin-left:auto;
  margin-right:auto;
}
body,html{
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  display:table
}
body{
  margin: 0;
  padding: 100px;
	width:80%; 
	height:600px; 
	background: -webkit-linear-gradient(top, #fafafa, #6e2a2a);   /* 颜色渐变*/
		
	} 
  .item1 {
    background: #6e2a2a;
    grid-area: header;
    padding: 20px;
  }
  
  .item2 {
    background: rgb(255, 255, 255);
    grid-area: advert;

  }
  
  .item3 {
    background:#fafafa;
    grid-area: content;
    padding: 20px;
  }
  
  .item4 {
    background: #6e2a2a;
    grid-area: footer;
    color: #fff;
    padding: 20px;
  }
  
  .container {
    font-size: 0.8em;
    min-height: 600px;
    width: 100%;
    background:-webkit-linear-gradient(top, #6e2a2a,#fafafa);  
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 50px auto 1fr auto;
    grid-gap: 10px;
    grid-template-areas:
      "header"
      "advert"
      "content"
      "footer";
  }
  
  @media (min-width: 300px){
    .container{
      grid-template-columns: auto 1fr;
      grid-template-rows: auto 1fr auto;
      grid-template-areas:
        "advert header"
        "advert content"
        "advert footer";
    }
  }
  
  @media (min-width: 400px){
    .container{

    
      grid-template-areas:
        "advert header"
        "advert content"
        "advert footer";
    

    }
  }




.cite{
  color: #6e2a2a;
}



#rect {
    height: 50px;
    width: 100%;
    margin: 70px auto;
    border-radius: 10px;
    position: relative;
    color:#fff;
  }

#rect {
  animation-name: rainbow;
  animation-duration: 3s;
}

@keyframes rainbow {
  0% {
    background-color:#6e2a2a;
    color: #fff;
    top: 0px;
    left: 0px;
    
  }
  50% {
    background-color:#ffffff;
    top:80px;
    left: 100px;
    
  }
  100% {
    background-color:#6e2a2a;
    color: #fff;

    top:0px;
    left: 0px;
    
  }
}


  #ball {
    width: 70px;
    height: 70px;
    margin: 0 auto;
    position: fixed;
    left: 5%;
    border-radius: 50%;
    background: linear-gradient(
      35deg,
      #fafafa,
      #6e2a2a
    );
    animation-name: fade;
    animation-duration: 3s;
  }

  @keyframes fade {

    50% {
      left: 80%;
      opacity: 0.1;
    }
  }

  #nav {
    width: auto;
    height:100%;
    top:340px;
    margin: 0 auto;
    padding:5px;
    color: #fafafa;
    position: fixed;
    left: 7.9%;
    border-radius: 0;
    background: 
      #6e2a2a
    
  }
  
  
  
  php
  postion_index
  extend name="common@public/base" /}
{block name="main-content"}
<!-- Content -->
<!--suppress ALL -->
<div class="content">
    <div class="animated fadeIn">
        <div class="row">
            <div class="col-xl-12">
                <div class="card">
                    <div class="card-body">
                        <h4 class="box-title">所有职位&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#smallmodal1">添加职位
                            </button>
                        </h4>
                    </div>
                    <div class="card-body--">
                        <div class="table-stats">
                            <table id="bootstrap-data-table" class="table">
                                <thead>
                                <tr>
                                    <th class="serial">序号</th>
                                    <th>职位</th>
                                    <th>状况</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody id="position_info">

                                                                {volist name="position_list" id="vo"}

                                                                <tr>
                                                                    <td class="serial">{$i}</td>
                                                                    <td><span class="product {$vo.id}">{$vo.name}</span></td>
                                                                    <td><span class="product">{eq name="vo.is_delete" value="0"}正常{else/}已作废{/eq}</span>
                                                                    </td>
                                                                    <td>
                                                                        {if condition="$vo.is_delete eq 1"}
                                                                        <button type="button"
                                                                                onclick="recoverPosition('{$vo.id}')"
                                                                                class="btn btn-recover btn-sm mb-1" >
                                                                            <i class="fa fa-rotate-left"></i>&nbsp;恢复
                                                                        </button>
                                                                        {else /}
                                                                        <button type="button"
                                                                                class="btn btn-primary btn-sm mb-1"
                                                                                data-toggle="modal"
                                                                                data-target="#smallmodal"
                                                                                onclick="setData('{$vo.id}', '{$vo.name}')">
                                                                            <i class="fa fa-magic"></i>&nbsp;编辑
                                                                        </button>&nbsp;&nbsp;&nbsp;&nbsp;
                                                                        <button type="button"
                                                                                class="btn btn-danger btn-sm mb-1"
                                                                                onclick="invalid('{$vo.id}')">
                                                                            <i class="fa fa-exclamation"></i>&nbsp;作废
                                                                        </button>
                                                                        {/if}
                                                                    </td>


                                                                </tr>
                                                                {/volist}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal fade" id="smallmodal1" tabindex="-1" role="dialog" aria-labelledby="smallmodalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-sm" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="scrollmodalLabel">添加职位</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>
                            <div class="form-group">
                                <div class="input-group">
                                    <div class="input-group-addon">
                                        <i class="fa fa-pencil-square-o"></i>
                                    </div>
                                    <input type="text" id="name" placeholder="请输入职位描述" class="form-control" value="">
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                            <button type="button" class="btn btn-success" onclick="addPosition()">确认</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- .animated -->
    </div>
</div>
<div class="modal fade" id="smallmodal" tabindex="-1" role="dialog" aria-labelledby="smallmodalLabel1"
     aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="scrollmodalLabel1">编辑职位</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <input hidden id="tmp_id">
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <div class="input-group">
                        <div class="input-group-addon">
                            <i class="fa fa-pencil-square-o"></i>
                        </div>
                        <input type="text" id="position_name" class="form-control">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-success" onclick="changePositionName()">确认</button>
                </div>
            </div>
        </div>
    </div>


</div>
<!-- /.content -->
{/block}
{block name="scripts"}
<script type="text/javascript">
    $(document).ready(function () {
        //loadTable();
    });

    function setData(id, name) {
        $("#tmp_id").attr('id_memory', id);
        $('#position_name').val(name);
    }


    function recoverPosition(id) {
        $.ajax({
            type: "POST",
            url: "restore",
            async: false,
            dataType: 'json',
            data: {
                "user_id": id
            },
            success: function () {
                notifyAndRemoveModal("恢复成功");
                //loadTable();
                window.location.reload();
            }
        })
    }

    function invalid(id) {
        $.ajax({
            type: "POST",
            url: "invalid",
            dataType: 'json',
            async: false,
            data: {
                "user_id": id
            },
            success: function () {
                notifyAndRemoveModal("作废成功");
                //loadTable();
                window.location.reload();
            }
        })
    }

    function showModel1() {
        $('#smallmodal1').addClass('show');
    }

    function addPosition() {
       // console.log($('#name').val())
        let n=$("#name");
        var name=n.val();
        //先做trim处理
        var name_add= $.trim(name);
        console.log(name_add);
      //判断字符串长度
        if (name_add.length>30){
            alert("长度过长，请重新输入");
        }else{
          //判断输入是否为汉字数字和字母
            var reg=  /^[\u4e00-\u9fa5\A-\Z\d\a-\z]+$/;
            if(reg.test(name_add)){
                $.ajax({
                    type: "POST",
                    url: "addPosition",
                    async: false,
                    dataType: 'json',
                    data: {
                        "name": $("#name").val()
                    },
                    success: function (data) {
                            console.log(data);
                            if(data.status==1){
                                alert(data.msg);
                                //$("#smallmodal1").modal("toggle");
                                //$('.modal-backdrop').remove();//去除遮罩层
                                window.location.reload();
                                //notifyAndRemoveModal(data.msg);
                                //loadTable();
                            }else{
                                alert(data.msg);
                            }

                    }
                })
            }else{
                alert("输入非法，请重新输入");
            }
        }
        //清除原有数据
        n.val("");
    }

    function changePositionName() {
        var id = $("#tmp_id").attr('id_memory');
        var name = $('#position_name').val();
        console.log(id, name);
        $.ajax({
            type: "POST",
            url: 'change',//请求程序页面
            async: false,//同步：当有返回值以后才会运行后面的js程序。
            data: {
                "id": id,
                "name": name
            },//请求需要发送的处理数据
            success: function (data) {
                console.log(data);
                if (data.status == 1) {
                    notifyAndRemoveModal(data.message);
                    //loadTable();
                    window.location.reload();
                } else {
                    alert(data.message);
                }
            }
        });
    }
   
    /*function changePositionName() {
        var id = $("#tmp_id").attr('id_memory');
        var name = $('#position_name').val();

        $.ajax({
            type: "POST",
            url: 'change',//请求程序页面
            async: false,//同步：当有返回值以后才会运行后面的js程序。
            data: {
                "id": id,
                "name": name
            },//请求需要发送的处理数据
            success: function () {
                notifyAndRemoveModal("编辑成功");
                loadTable();
            },
            fail: function (msg) {
                console.log(msg);
            }

        });
    }*/

    function notifyAndRemoveModal(msg) {
        alert(msg);
        $("#smallmodal").modal("hide");
        $("#smallmodal1").modal("hide");
        $('.modal-backdrop').remove();//去除遮罩层
    }


    function loadTable() {
        $.ajax({
            type: "POST",
            url: 'loadPosition',
            async: false,
            dataType: 'json',
            success: function (data) {
                var table_html = "";
                var note = ["正常", "已作废"];
                for (var i = 0; i < data.length; i++) {
                    var item = data[i]
                    if (item.is_delete) {
                        table_html += `<tr class="deleted">
                                            <td class="serial">${i + 1}</td>
                                            <td class="product">${item.name}</td>
                                            <td class="product">${note[item.is_delete]}</td>
                                            <td>
                                                <button type="button"
                                                        onclick="recoverPosition(${item.id})"
                                                        class="btn btn-recover btn-sm mb-1" >
                                                            <i class="fa fa-rotate-left"/>&nbsp;恢复
                                                </button>
                                            </td>
                                        </tr>`;
                    } else {
                        table_html += `<tr>
                                            <td class="serial">${i + 1}</td>
                                            <td class="product">${item.name}</td>
                                            <td class="product">${note[item.is_delete]}</td>
                                            <td>
                                                <button type="button"
                                                class="btn btn-primary btn-sm mb-1"
                                                data-toggle="modal"
                                                data-target="#smallmodal"
                                                onclick="setData(${item.id}, '${item.name}')">
                                                    <i class="fa fa-magic"></i>&nbsp;编辑
                                                </button>&nbsp;&nbsp;&nbsp;&nbsp;
                                                <button type="button"
                                                        class="btn btn-danger btn-sm mb-1"
                                                        onclick="invalid(${item.id})">
                                                        <i class="fa fa-exclamation"/>&nbsp;作废
                                                </button>
                                            </td>
                                       </tr>`;
                    }
                }
                $("#position_info").html(table_html);
            }
        });
    }

</script>
{/block}



position_controller
public function addPosition()
    {
        $name = $_POST['name'];
      	//判断输入是否为空
        if (empty($name)){
            $this->error('职位不能为空，请重新输入');
        }
      	//判断输入长度
        if (strlen($name)<30){
            $model = model('Position');
          	//判断是否重名
            $ifsame=$model->getPosition($name);
            if ($ifsame==null){
                $result = $model->insertPosition($name);
                if ($result == 1) {
                    return json(array("status"=>1,"msg"=>"新增成功"));
                    //$this->success('新增成功');
                } else {
                    return json(array("status"=>0,"msg"=>"新增失败,请重新尝试"));
                    //$this->error('新增失败,请重新尝试');
                }
            }
            else{
                return json(array("status"=>0,"msg"=>"职位重复，请重新输入"));
                //$this->error("职位重复，请重新输入");
            }
        }else{
            return json(array("status"=>0,"msg"=>"职位名称过长，请重新输入"));
            //$this->error("职位名称过长，请重新输入");
        }

    }
    
    
    
     public function insertPosition($name)
    {
        $data = ['name' => $name, 'is_delete' => 0];
        $result = Db::name('user_position')->insert($data);
        return $result;
    }
    public function getPosition($name)
    {
        $positionName = Db::name('user_position')
            ->where('name', $name)
            ->where('is_delete', 0)
            ->find();
        return $positionName;
    }
}
    position_method
    
